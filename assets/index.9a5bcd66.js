(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(r){if(r.ep)return;r.ep=!0;const l=e(r);fetch(r.href,l)}})();function Q(){}function re(n){return n()}function xt(){return Object.create(null)}function yn(n){n.forEach(re)}function $e(n){return typeof n=="function"}function Qn(n,t){return n!=n?t==t:n!==t||n&&typeof n=="object"||typeof n=="function"}function Ne(n){return Object.keys(n).length===0}function Le(n,...t){if(n==null)return Q;const e=n.subscribe(...t);return e.unsubscribe?()=>e.unsubscribe():e}function dn(n,t,e){n.$$.on_destroy.push(Le(t,e))}function D(n,t){n.appendChild(t)}function Rt(n,t,e){n.insertBefore(t,e||null)}function Un(n){n.parentNode.removeChild(n)}function G(n){return document.createElement(n)}function et(n){return document.createTextNode(n)}function fn(){return et(" ")}function $n(n,t,e,i){return n.addEventListener(t,e,i),()=>n.removeEventListener(t,e,i)}function F(n,t,e){e==null?n.removeAttribute(t):n.getAttribute(t)!==e&&n.setAttribute(t,e)}function Ae(n){return Array.from(n.childNodes)}let $t;function Nn(n){$t=n}const En=[],Ln=[],On=[],Ct=[],Ie=Promise.resolve();let it=!1;function ze(){it||(it=!0,Ie.then(oe))}function rt(n){On.push(n)}const Vn=new Set;let xn=0;function oe(){const n=$t;do{for(;xn<En.length;){const t=En[xn];xn++,Nn(t),Te(t.$$)}for(Nn(null),En.length=0,xn=0;Ln.length;)Ln.pop()();for(let t=0;t<On.length;t+=1){const e=On[t];Vn.has(e)||(Vn.add(e),e())}On.length=0}while(En.length);for(;Ct.length;)Ct.pop()();it=!1,Vn.clear(),Nn(n)}function Te(n){if(n.fragment!==null){n.update(),yn(n.before_update);const t=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,t),n.after_update.forEach(rt)}}const Bn=new Set;let xe;function ot(n,t){n&&n.i&&(Bn.delete(n),n.i(t))}function Dt(n,t,e,i){if(n&&n.o){if(Bn.has(n))return;Bn.add(n),xe.c.push(()=>{Bn.delete(n),i&&(e&&n.d(1),i())}),n.o(t)}else i&&i()}function qt(n){n&&n.c()}function ut(n,t,e,i){const{fragment:r,on_mount:l,on_destroy:o,after_update:a}=n.$$;r&&r.m(t,e),i||rt(()=>{const p=l.map(re).filter($e);o?o.push(...p):yn(p),n.$$.on_mount=[]}),a.forEach(rt)}function lt(n,t){const e=n.$$;e.fragment!==null&&(yn(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function Ce(n,t){n.$$.dirty[0]===-1&&(En.push(n),ze(),n.$$.dirty.fill(0)),n.$$.dirty[t/31|0]|=1<<t%31}function Nt(n,t,e,i,r,l,o,a=[-1]){const p=$t;Nn(n);const c=n.$$={fragment:null,ctx:null,props:l,update:Q,not_equal:r,bound:xt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(p?p.$$.context:[])),callbacks:xt(),dirty:a,skip_bound:!1,root:t.target||p.$$.root};o&&o(c.root);let u=!1;if(c.ctx=e?e(n,t.props||{},(f,s,...d)=>{const g=d.length?d[0]:s;return c.ctx&&r(c.ctx[f],c.ctx[f]=g)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](g),u&&Ce(n,f)),s}):[],c.update(),u=!0,yn(c.before_update),c.fragment=i?i(c.ctx):!1,t.target){if(t.hydrate){const f=Ae(t.target);c.fragment&&c.fragment.l(f),f.forEach(Un)}else c.fragment&&c.fragment.c();t.intro&&ot(n.$$.fragment),ut(n,t.target,t.anchor,t.customElement),oe()}Nn(p)}class Lt{$destroy(){lt(this,1),this.$destroy=Q}$on(t,e){const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(e),()=>{const r=i.indexOf(e);r!==-1&&i.splice(r,1)}}$set(t){this.$$set&&!Ne(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const hn=[];function ue(n,t){return{subscribe:At(n,t).subscribe}}function At(n,t=Q){let e;const i=new Set;function r(a){if(Qn(n,a)&&(n=a,e)){const p=!hn.length;for(const c of i)c[1](),hn.push(c,n);if(p){for(let c=0;c<hn.length;c+=2)hn[c][0](hn[c+1]);hn.length=0}}}function l(a){r(a(n))}function o(a,p=Q){const c=[a,p];return i.add(c),i.size===1&&(e=t(r)||Q),a(n),()=>{i.delete(c),i.size===0&&(e(),e=null)}}return{set:r,update:l,subscribe:o}}function De(n){if(!n.ok)throw new Error(n.status+" "+n.statusText);if(!(n.status===204||n.status===205))return n.json()}function le(n,t){return fetch(n,t).then(De)}const qe=ue(null,function(t){return le("./data/geo_sectoren.geojson").then(e=>{t(e)}),function(){}}),Fe=ue(null,function(t){return le("./data/provinces.geojson").then(e=>{t(e)}),function(){}}),ft=At(!1),ct=At(!1);function Oe(n){let t,e,i,r,l,o,a,p,c,u,f,s,d,g,E,v;return{c(){t=G("div"),e=G("div"),i=G("label"),r=G("input"),l=et(`\r
      Draw in pixels (vs smooth)`),o=fn(),a=G("div"),p=G("label"),c=G("input"),u=et(`\r
      Erase`),f=fn(),s=G("div"),s.innerHTML="<button>Erase all</button>",d=fn(),g=G("div"),g.innerHTML="<button>Done!</button>",F(r,"type","checkbox"),F(c,"type","checkbox"),F(t,"id","button-row"),F(t,"class","svelte-5kw3oy")},m(w,S){Rt(w,t,S),D(t,e),D(e,i),D(i,r),r.checked=n[0],D(i,l),D(t,o),D(t,a),D(a,p),D(p,c),c.checked=n[1],D(p,u),D(t,f),D(t,s),D(t,d),D(t,g),E||(v=[$n(r,"change",n[2]),$n(c,"change",n[3])],E=!0)},p(w,[S]){S&1&&(r.checked=w[0]),S&2&&(c.checked=w[1])},i:Q,o:Q,d(w){w&&Un(t),E=!1,yn(v)}}}function Be(n,t,e){let i,r;dn(n,ct,a=>e(0,i=a)),dn(n,ft,a=>e(1,r=a));function l(){i=this.checked,ct.set(i)}function o(){r=this.checked,ft.set(r)}return[i,r,l,o]}class He extends Lt{constructor(t){super(),Nt(this,t,Be,Oe,Qn,{})}}class cn{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const l=e[r],o=t+l,a=Math.abs(t)<Math.abs(l)?t-(o-l):l-(o-t);a&&(e[i++]=a),t=o}return e[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let e=this._n,i,r,l,o=0;if(e>0){for(o=t[--e];e>0&&(i=o,r=t[--e],o=i+r,l=r-(o-i),!l););e>0&&(l<0&&t[e-1]<0||l>0&&t[e-1]>0)&&(r=l*2,i=o+r,r==i-o&&(o=i))}return o}}function*Xe(n){for(const t of n)yield*t}function fe(n){return Array.from(Xe(n))}var C=1e-6,Ye=1e-12,N=Math.PI,Z=N/2,Ft=N/4,J=N*2,k=180/N,X=N/180,O=Math.abs,ce=Math.atan,An=Math.atan2,B=Math.cos,Ge=Math.exp,We=Math.log,H=Math.sin,Ze=Math.sign||function(n){return n>0?1:n<0?-1:0},sn=Math.sqrt,ke=Math.tan;function Je(n){return n>1?0:n<-1?N:Math.acos(n)}function In(n){return n>1?Z:n<-1?-Z:Math.asin(n)}function K(){}function Xn(n,t){n&&Bt.hasOwnProperty(n.type)&&Bt[n.type](n,t)}var Ot={Feature:function(n,t){Xn(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,i=-1,r=e.length;++i<r;)Xn(e[i].geometry,t)}},Bt={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)n=e[i],t.point(n[0],n[1],n[2])},LineString:function(n,t){at(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)at(e[i],t,0)},Polygon:function(n,t){Ht(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)Ht(e[i],t)},GeometryCollection:function(n,t){for(var e=n.geometries,i=-1,r=e.length;++i<r;)Xn(e[i],t)}};function at(n,t,e){var i=-1,r=n.length-e,l;for(t.lineStart();++i<r;)l=n[i],t.point(l[0],l[1],l[2]);t.lineEnd()}function Ht(n,t){var e=-1,i=n.length;for(t.polygonStart();++e<i;)at(n[e],t,1);t.polygonEnd()}function gn(n,t){n&&Ot.hasOwnProperty(n.type)?Ot[n.type](n,t):Xn(n,t)}function st(n){return[An(n[1],n[0]),In(n[2])]}function _n(n){var t=n[0],e=n[1],i=B(e);return[i*B(t),i*H(t),H(e)]}function Cn(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function Yn(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function jn(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function Dn(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function pt(n){var t=sn(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function ht(n,t){function e(i,r){return i=n(i,r),t(i[0],i[1])}return n.invert&&t.invert&&(e.invert=function(i,r){return i=t.invert(i,r),i&&n.invert(i[0],i[1])}),e}function gt(n,t){return[O(n)>N?n+Math.round(-n/J)*J:n,t]}gt.invert=gt;function ae(n,t,e){return(n%=J)?t||e?ht(Yt(n),Gt(t,e)):Yt(n):t||e?Gt(t,e):gt}function Xt(n){return function(t,e){return t+=n,[t>N?t-J:t<-N?t+J:t,e]}}function Yt(n){var t=Xt(n);return t.invert=Xt(-n),t}function Gt(n,t){var e=B(n),i=H(n),r=B(t),l=H(t);function o(a,p){var c=B(p),u=B(a)*c,f=H(a)*c,s=H(p),d=s*e+u*i;return[An(f*r-d*l,u*e-s*i),In(d*r+f*l)]}return o.invert=function(a,p){var c=B(p),u=B(a)*c,f=H(a)*c,s=H(p),d=s*r-f*l;return[An(f*r+s*l,u*e+d*i),In(d*e-u*i)]},o}function Ke(n){n=ae(n[0]*X,n[1]*X,n.length>2?n[2]*X:0);function t(e){return e=n(e[0]*X,e[1]*X),e[0]*=k,e[1]*=k,e}return t.invert=function(e){return e=n.invert(e[0]*X,e[1]*X),e[0]*=k,e[1]*=k,e},t}function Qe(n,t,e,i,r,l){if(!!e){var o=B(t),a=H(t),p=i*e;r==null?(r=t+i*J,l=t-p/2):(r=Wt(o,r),l=Wt(o,l),(i>0?r<l:r>l)&&(r+=i*J));for(var c,u=r;i>0?u>l:u<l;u-=p)c=st([o,-a*B(u),-a*H(u)]),n.point(c[0],c[1])}}function Wt(n,t){t=_n(t),t[0]-=n,pt(t);var e=Je(-t[1]);return((-t[2]<0?-e:e)+J-C)%J}function se(){var n=[],t;return{point:function(e,i,r){t.push([e,i,r])},lineStart:function(){n.push(t=[])},lineEnd:K,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function Hn(n,t){return O(n[0]-t[0])<C&&O(n[1]-t[1])<C}function qn(n,t,e,i){this.x=n,this.z=t,this.o=e,this.e=i,this.v=!1,this.n=this.p=null}function pe(n,t,e,i,r){var l=[],o=[],a,p;if(n.forEach(function(g){if(!((E=g.length-1)<=0)){var E,v=g[0],w=g[E],S;if(Hn(v,w)){if(!v[2]&&!w[2]){for(r.lineStart(),a=0;a<E;++a)r.point((v=g[a])[0],v[1]);r.lineEnd();return}w[0]+=2*C}l.push(S=new qn(v,g,null,!0)),o.push(S.o=new qn(v,null,S,!1)),l.push(S=new qn(w,g,null,!1)),o.push(S.o=new qn(w,null,S,!0))}}),!!l.length){for(o.sort(t),Zt(l),Zt(o),a=0,p=o.length;a<p;++a)o[a].e=e=!e;for(var c=l[0],u,f;;){for(var s=c,d=!0;s.v;)if((s=s.n)===c)return;u=s.z,r.lineStart();do{if(s.v=s.o.v=!0,s.e){if(d)for(a=0,p=u.length;a<p;++a)r.point((f=u[a])[0],f[1]);else i(s.x,s.n.x,1,r);s=s.n}else{if(d)for(u=s.p.z,a=u.length-1;a>=0;--a)r.point((f=u[a])[0],f[1]);else i(s.x,s.p.x,-1,r);s=s.p}s=s.o,u=s.z,d=!d}while(!s.v);r.lineEnd()}}}function Zt(n){if(!!(t=n.length)){for(var t,e=0,i=n[0],r;++e<t;)i.n=r=n[e],r.p=i,i=r;i.n=r=n[0],r.p=i}}function bn(n){return O(n[0])<=N?n[0]:Ze(n[0])*((O(n[0])+N)%J-N)}function Ue(n,t){var e=bn(t),i=t[1],r=H(i),l=[H(e),-B(e),0],o=0,a=0,p=new cn;r===1?i=Z+C:r===-1&&(i=-Z-C);for(var c=0,u=n.length;c<u;++c)if(!!(s=(f=n[c]).length))for(var f,s,d=f[s-1],g=bn(d),E=d[1]/2+Ft,v=H(E),w=B(E),S=0;S<s;++S,g=y,v=R,w=z,d=M){var M=f[S],y=bn(M),P=M[1]/2+Ft,R=H(P),z=B(P),L=y-g,A=L>=0?1:-1,m=A*L,_=m>N,T=v*R;if(p.add(An(T*A*H(m),w*z+T*B(m))),o+=_?L+A*J:L,_^g>=e^y>=e){var x=Yn(_n(d),_n(M));pt(x);var I=Yn(l,x);pt(I);var h=(_^L>=0?-1:1)*In(I[2]);(i>h||i===h&&(x[0]||x[1]))&&(a+=_^L>=0?1:-1)}}return(o<-C||o<C&&p<-Ye)^a&1}function he(n,t,e,i){return function(r){var l=t(r),o=se(),a=t(o),p=!1,c,u,f,s={point:d,lineStart:E,lineEnd:v,polygonStart:function(){s.point=w,s.lineStart=S,s.lineEnd=M,u=[],c=[]},polygonEnd:function(){s.point=d,s.lineStart=E,s.lineEnd=v,u=fe(u);var y=Ue(c,i);u.length?(p||(r.polygonStart(),p=!0),pe(u,je,y,e,r)):y&&(p||(r.polygonStart(),p=!0),r.lineStart(),e(null,null,1,r),r.lineEnd()),p&&(r.polygonEnd(),p=!1),u=c=null},sphere:function(){r.polygonStart(),r.lineStart(),e(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function d(y,P){n(y,P)&&r.point(y,P)}function g(y,P){l.point(y,P)}function E(){s.point=g,l.lineStart()}function v(){s.point=d,l.lineEnd()}function w(y,P){f.push([y,P]),a.point(y,P)}function S(){a.lineStart(),f=[]}function M(){w(f[0][0],f[0][1]),a.lineEnd();var y=a.clean(),P=o.result(),R,z=P.length,L,A,m;if(f.pop(),c.push(f),f=null,!!z){if(y&1){if(A=P[0],(L=A.length-1)>0){for(p||(r.polygonStart(),p=!0),r.lineStart(),R=0;R<L;++R)r.point((m=A[R])[0],m[1]);r.lineEnd()}return}z>1&&y&2&&P.push(P.pop().concat(P.shift())),u.push(P.filter(Ve))}}return s}}function Ve(n){return n.length>1}function je(n,t){return((n=n.x)[0]<0?n[1]-Z-C:Z-n[1])-((t=t.x)[0]<0?t[1]-Z-C:Z-t[1])}const kt=he(function(){return!0},be,ti,[-N,-Z]);function be(n){var t=NaN,e=NaN,i=NaN,r;return{lineStart:function(){n.lineStart(),r=1},point:function(l,o){var a=l>0?N:-N,p=O(l-t);O(p-N)<C?(n.point(t,e=(e+o)/2>0?Z:-Z),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(a,e),n.point(l,e),r=0):i!==a&&p>=N&&(O(t-i)<C&&(t-=i*C),O(l-a)<C&&(l-=a*C),e=ni(t,e,l,o),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(a,e),r=0),n.point(t=l,e=o),i=a},lineEnd:function(){n.lineEnd(),t=e=NaN},clean:function(){return 2-r}}}function ni(n,t,e,i){var r,l,o=H(n-e);return O(o)>C?ce((H(t)*(l=B(i))*H(e)-H(i)*(r=B(t))*H(n))/(r*l*o)):(t+i)/2}function ti(n,t,e,i){var r;if(n==null)r=e*Z,i.point(-N,r),i.point(0,r),i.point(N,r),i.point(N,0),i.point(N,-r),i.point(0,-r),i.point(-N,-r),i.point(-N,0),i.point(-N,r);else if(O(n[0]-t[0])>C){var l=n[0]<t[0]?N:-N;r=e*l/2,i.point(-l,r),i.point(0,r),i.point(l,r)}else i.point(t[0],t[1])}function ei(n){var t=B(n),e=6*X,i=t>0,r=O(t)>C;function l(u,f,s,d){Qe(d,n,e,s,u,f)}function o(u,f){return B(u)*B(f)>t}function a(u){var f,s,d,g,E;return{lineStart:function(){g=d=!1,E=1},point:function(v,w){var S=[v,w],M,y=o(v,w),P=i?y?0:c(v,w):y?c(v+(v<0?N:-N),w):0;if(!f&&(g=d=y)&&u.lineStart(),y!==d&&(M=p(f,S),(!M||Hn(f,M)||Hn(S,M))&&(S[2]=1)),y!==d)E=0,y?(u.lineStart(),M=p(S,f),u.point(M[0],M[1])):(M=p(f,S),u.point(M[0],M[1],2),u.lineEnd()),f=M;else if(r&&f&&i^y){var R;!(P&s)&&(R=p(S,f,!0))&&(E=0,i?(u.lineStart(),u.point(R[0][0],R[0][1]),u.point(R[1][0],R[1][1]),u.lineEnd()):(u.point(R[1][0],R[1][1]),u.lineEnd(),u.lineStart(),u.point(R[0][0],R[0][1],3)))}y&&(!f||!Hn(f,S))&&u.point(S[0],S[1]),f=S,d=y,s=P},lineEnd:function(){d&&u.lineEnd(),f=null},clean:function(){return E|(g&&d)<<1}}}function p(u,f,s){var d=_n(u),g=_n(f),E=[1,0,0],v=Yn(d,g),w=Cn(v,v),S=v[0],M=w-S*S;if(!M)return!s&&u;var y=t*w/M,P=-t*S/M,R=Yn(E,v),z=Dn(E,y),L=Dn(v,P);jn(z,L);var A=R,m=Cn(z,A),_=Cn(A,A),T=m*m-_*(Cn(z,z)-1);if(!(T<0)){var x=sn(T),I=Dn(A,(-m-x)/_);if(jn(I,z),I=st(I),!s)return I;var h=u[0],$=f[0],q=u[1],Y=f[1],W;$<h&&(W=h,h=$,$=W);var en=$-h,b=O(en-N)<C,on=b||en<C;if(!b&&Y<q&&(W=q,q=Y,Y=W),on?b?q+Y>0^I[1]<(O(I[0]-h)<C?q:Y):q<=I[1]&&I[1]<=Y:en>N^(h<=I[0]&&I[0]<=$)){var nn=Dn(A,(-m+x)/_);return jn(nn,z),[I,st(nn)]}}}function c(u,f){var s=i?n:N-n,d=0;return u<-s?d|=1:u>s&&(d|=2),f<-s?d|=4:f>s&&(d|=8),d}return he(o,a,l,i?[0,-n]:[-N,n-N])}function ii(n,t,e,i,r,l){var o=n[0],a=n[1],p=t[0],c=t[1],u=0,f=1,s=p-o,d=c-a,g;if(g=e-o,!(!s&&g>0)){if(g/=s,s<0){if(g<u)return;g<f&&(f=g)}else if(s>0){if(g>f)return;g>u&&(u=g)}if(g=r-o,!(!s&&g<0)){if(g/=s,s<0){if(g>f)return;g>u&&(u=g)}else if(s>0){if(g<u)return;g<f&&(f=g)}if(g=i-a,!(!d&&g>0)){if(g/=d,d<0){if(g<u)return;g<f&&(f=g)}else if(d>0){if(g>f)return;g>u&&(u=g)}if(g=l-a,!(!d&&g<0)){if(g/=d,d<0){if(g>f)return;g>u&&(u=g)}else if(d>0){if(g<u)return;g<f&&(f=g)}return u>0&&(n[0]=o+u*s,n[1]=a+u*d),f<1&&(t[0]=o+f*s,t[1]=a+f*d),!0}}}}}var mn=1e9,Fn=-mn;function ri(n,t,e,i){function r(c,u){return n<=c&&c<=e&&t<=u&&u<=i}function l(c,u,f,s){var d=0,g=0;if(c==null||(d=o(c,f))!==(g=o(u,f))||p(c,u)<0^f>0)do s.point(d===0||d===3?n:e,d>1?i:t);while((d=(d+f+4)%4)!==g);else s.point(u[0],u[1])}function o(c,u){return O(c[0]-n)<C?u>0?0:3:O(c[0]-e)<C?u>0?2:1:O(c[1]-t)<C?u>0?1:0:u>0?3:2}function a(c,u){return p(c.x,u.x)}function p(c,u){var f=o(c,1),s=o(u,1);return f!==s?f-s:f===0?u[1]-c[1]:f===1?c[0]-u[0]:f===2?c[1]-u[1]:u[0]-c[0]}return function(c){var u=c,f=se(),s,d,g,E,v,w,S,M,y,P,R,z={point:L,lineStart:T,lineEnd:x,polygonStart:m,polygonEnd:_};function L(h,$){r(h,$)&&u.point(h,$)}function A(){for(var h=0,$=0,q=d.length;$<q;++$)for(var Y=d[$],W=1,en=Y.length,b=Y[0],on,nn,Tn=b[0],pn=b[1];W<en;++W)on=Tn,nn=pn,b=Y[W],Tn=b[0],pn=b[1],nn<=i?pn>i&&(Tn-on)*(i-nn)>(pn-nn)*(n-on)&&++h:pn<=i&&(Tn-on)*(i-nn)<(pn-nn)*(n-on)&&--h;return h}function m(){u=f,s=[],d=[],R=!0}function _(){var h=A(),$=R&&h,q=(s=fe(s)).length;($||q)&&(c.polygonStart(),$&&(c.lineStart(),l(null,null,1,c),c.lineEnd()),q&&pe(s,a,h,l,c),c.polygonEnd()),u=c,s=d=g=null}function T(){z.point=I,d&&d.push(g=[]),P=!0,y=!1,S=M=NaN}function x(){s&&(I(E,v),w&&y&&f.rejoin(),s.push(f.result())),z.point=L,y&&u.lineEnd()}function I(h,$){var q=r(h,$);if(d&&g.push([h,$]),P)E=h,v=$,w=q,P=!1,q&&(u.lineStart(),u.point(h,$));else if(q&&y)u.point(h,$);else{var Y=[S=Math.max(Fn,Math.min(mn,S)),M=Math.max(Fn,Math.min(mn,M))],W=[h=Math.max(Fn,Math.min(mn,h)),$=Math.max(Fn,Math.min(mn,$))];ii(Y,W,n,t,e,i)?(y||(u.lineStart(),u.point(Y[0],Y[1])),u.point(W[0],W[1]),q||u.lineEnd(),R=!1):q&&(u.lineStart(),u.point(h,$),R=!1)}S=h,M=$,y=q}return z}}const dt=n=>n;var nt=new cn,vt=new cn,ge,de,_t,St,rn={point:K,lineStart:K,lineEnd:K,polygonStart:function(){rn.lineStart=oi,rn.lineEnd=li},polygonEnd:function(){rn.lineStart=rn.lineEnd=rn.point=K,nt.add(O(vt)),vt=new cn},result:function(){var n=nt/2;return nt=new cn,n}};function oi(){rn.point=ui}function ui(n,t){rn.point=ve,ge=_t=n,de=St=t}function ve(n,t){vt.add(St*n-_t*t),_t=n,St=t}function li(){ve(ge,de)}const Jt=rn;var Sn=1/0,Gn=Sn,zn=-Sn,Wn=zn,fi={point:ci,lineStart:K,lineEnd:K,polygonStart:K,polygonEnd:K,result:function(){var n=[[Sn,Gn],[zn,Wn]];return zn=Wn=-(Gn=Sn=1/0),n}};function ci(n,t){n<Sn&&(Sn=n),n>zn&&(zn=n),t<Gn&&(Gn=t),t>Wn&&(Wn=t)}const Zn=fi;var yt=0,Et=0,wn=0,kn=0,Jn=0,vn=0,mt=0,wt=0,Mn=0,_e,Se,V,j,U={point:an,lineStart:Kt,lineEnd:Qt,polygonStart:function(){U.lineStart=pi,U.lineEnd=hi},polygonEnd:function(){U.point=an,U.lineStart=Kt,U.lineEnd=Qt},result:function(){var n=Mn?[mt/Mn,wt/Mn]:vn?[kn/vn,Jn/vn]:wn?[yt/wn,Et/wn]:[NaN,NaN];return yt=Et=wn=kn=Jn=vn=mt=wt=Mn=0,n}};function an(n,t){yt+=n,Et+=t,++wn}function Kt(){U.point=ai}function ai(n,t){U.point=si,an(V=n,j=t)}function si(n,t){var e=n-V,i=t-j,r=sn(e*e+i*i);kn+=r*(V+n)/2,Jn+=r*(j+t)/2,vn+=r,an(V=n,j=t)}function Qt(){U.point=an}function pi(){U.point=gi}function hi(){ye(_e,Se)}function gi(n,t){U.point=ye,an(_e=V=n,Se=j=t)}function ye(n,t){var e=n-V,i=t-j,r=sn(e*e+i*i);kn+=r*(V+n)/2,Jn+=r*(j+t)/2,vn+=r,r=j*n-V*t,mt+=r*(V+n),wt+=r*(j+t),Mn+=r*3,an(V=n,j=t)}const Ut=U;function Ee(n){this._context=n}Ee.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break}case 1:{this._context.lineTo(n,t);break}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,J);break}}},result:K};var Mt=new cn,tt,me,we,Pn,Rn,Kn={point:K,lineStart:function(){Kn.point=di},lineEnd:function(){tt&&Me(me,we),Kn.point=K},polygonStart:function(){tt=!0},polygonEnd:function(){tt=null},result:function(){var n=+Mt;return Mt=new cn,n}};function di(n,t){Kn.point=Me,me=Pn=n,we=Rn=t}function Me(n,t){Pn-=n,Rn-=t,Mt.add(sn(Pn*Pn+Rn*Rn)),Pn=n,Rn=t}const Vt=Kn;function Pe(){this._string=[]}Pe.prototype={_radius:4.5,_circle:jt(4.5),pointRadius:function(n){return(n=+n)!==this._radius&&(this._radius=n,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._string.push("M",n,",",t),this._point=1;break}case 1:{this._string.push("L",n,",",t);break}default:{this._circle==null&&(this._circle=jt(this._radius)),this._string.push("M",n,",",t,this._circle);break}}},result:function(){if(this._string.length){var n=this._string.join("");return this._string=[],n}else return null}};function jt(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function vi(n,t){var e=4.5,i,r;function l(o){return o&&(typeof e=="function"&&r.pointRadius(+e.apply(this,arguments)),gn(o,i(r))),r.result()}return l.area=function(o){return gn(o,i(Jt)),Jt.result()},l.measure=function(o){return gn(o,i(Vt)),Vt.result()},l.bounds=function(o){return gn(o,i(Zn)),Zn.result()},l.centroid=function(o){return gn(o,i(Ut)),Ut.result()},l.projection=function(o){return arguments.length?(i=o==null?(n=null,dt):(n=o).stream,l):n},l.context=function(o){return arguments.length?(r=o==null?(t=null,new Pe):new Ee(t=o),typeof e!="function"&&r.pointRadius(e),l):t},l.pointRadius=function(o){return arguments.length?(e=typeof o=="function"?o:(r.pointRadius(+o),+o),l):e},l.projection(n).context(t)}function It(n){return function(t){var e=new Pt;for(var i in n)e[i]=n[i];return e.stream=t,e}}function Pt(){}Pt.prototype={constructor:Pt,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function zt(n,t,e){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),i!=null&&n.clipExtent(null),gn(e,n.stream(Zn)),t(Zn.result()),i!=null&&n.clipExtent(i),n}function Re(n,t,e){return zt(n,function(i){var r=t[1][0]-t[0][0],l=t[1][1]-t[0][1],o=Math.min(r/(i[1][0]-i[0][0]),l/(i[1][1]-i[0][1])),a=+t[0][0]+(r-o*(i[1][0]+i[0][0]))/2,p=+t[0][1]+(l-o*(i[1][1]+i[0][1]))/2;n.scale(150*o).translate([a,p])},e)}function _i(n,t,e){return Re(n,[[0,0],t],e)}function Si(n,t,e){return zt(n,function(i){var r=+t,l=r/(i[1][0]-i[0][0]),o=(r-l*(i[1][0]+i[0][0]))/2,a=-l*i[0][1];n.scale(150*l).translate([o,a])},e)}function yi(n,t,e){return zt(n,function(i){var r=+t,l=r/(i[1][1]-i[0][1]),o=-l*i[0][0],a=(r-l*(i[1][1]+i[0][1]))/2;n.scale(150*l).translate([o,a])},e)}var bt=16,Ei=B(30*X);function ne(n,t){return+t?wi(n,t):mi(n)}function mi(n){return It({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}function wi(n,t){function e(i,r,l,o,a,p,c,u,f,s,d,g,E,v){var w=c-i,S=u-r,M=w*w+S*S;if(M>4*t&&E--){var y=o+s,P=a+d,R=p+g,z=sn(y*y+P*P+R*R),L=In(R/=z),A=O(O(R)-1)<C||O(l-f)<C?(l+f)/2:An(P,y),m=n(A,L),_=m[0],T=m[1],x=_-i,I=T-r,h=S*x-w*I;(h*h/M>t||O((w*x+S*I)/M-.5)>.3||o*s+a*d+p*g<Ei)&&(e(i,r,l,o,a,p,_,T,A,y/=z,P/=z,R,E,v),v.point(_,T),e(_,T,A,y,P,R,c,u,f,s,d,g,E,v))}}return function(i){var r,l,o,a,p,c,u,f,s,d,g,E,v={point:w,lineStart:S,lineEnd:y,polygonStart:function(){i.polygonStart(),v.lineStart=P},polygonEnd:function(){i.polygonEnd(),v.lineStart=S}};function w(L,A){L=n(L,A),i.point(L[0],L[1])}function S(){f=NaN,v.point=M,i.lineStart()}function M(L,A){var m=_n([L,A]),_=n(L,A);e(f,s,u,d,g,E,f=_[0],s=_[1],u=L,d=m[0],g=m[1],E=m[2],bt,i),i.point(f,s)}function y(){v.point=w,i.lineEnd()}function P(){S(),v.point=R,v.lineEnd=z}function R(L,A){M(r=L,A),l=f,o=s,a=d,p=g,c=E,v.point=M}function z(){e(f,s,u,d,g,E,l,o,r,a,p,c,bt,i),v.lineEnd=y,y()}return v}}var Mi=It({point:function(n,t){this.stream.point(n*X,t*X)}});function Pi(n){return It({point:function(t,e){var i=n(t,e);return this.stream.point(i[0],i[1])}})}function Ri(n,t,e,i,r){function l(o,a){return o*=i,a*=r,[t+n*o,e-n*a]}return l.invert=function(o,a){return[(o-t)/n*i,(e-a)/n*r]},l}function te(n,t,e,i,r,l){if(!l)return Ri(n,t,e,i,r);var o=B(l),a=H(l),p=o*n,c=a*n,u=o/n,f=a/n,s=(a*e-o*t)/n,d=(a*t+o*e)/n;function g(E,v){return E*=i,v*=r,[p*E-c*v+t,e-c*E-p*v]}return g.invert=function(E,v){return[i*(u*E-f*v+s),r*(d-f*E-u*v)]},g}function $i(n){return Ni(function(){return n})()}function Ni(n){var t,e=150,i=480,r=250,l=0,o=0,a=0,p=0,c=0,u,f=0,s=1,d=1,g=null,E=kt,v=null,w,S,M,y=dt,P=.5,R,z,L,A,m;function _(h){return L(h[0]*X,h[1]*X)}function T(h){return h=L.invert(h[0],h[1]),h&&[h[0]*k,h[1]*k]}_.stream=function(h){return A&&m===h?A:A=Mi(Pi(u)(E(R(y(m=h)))))},_.preclip=function(h){return arguments.length?(E=h,g=void 0,I()):E},_.postclip=function(h){return arguments.length?(y=h,v=w=S=M=null,I()):y},_.clipAngle=function(h){return arguments.length?(E=+h?ei(g=h*X):(g=null,kt),I()):g*k},_.clipExtent=function(h){return arguments.length?(y=h==null?(v=w=S=M=null,dt):ri(v=+h[0][0],w=+h[0][1],S=+h[1][0],M=+h[1][1]),I()):v==null?null:[[v,w],[S,M]]},_.scale=function(h){return arguments.length?(e=+h,x()):e},_.translate=function(h){return arguments.length?(i=+h[0],r=+h[1],x()):[i,r]},_.center=function(h){return arguments.length?(l=h[0]%360*X,o=h[1]%360*X,x()):[l*k,o*k]},_.rotate=function(h){return arguments.length?(a=h[0]%360*X,p=h[1]%360*X,c=h.length>2?h[2]%360*X:0,x()):[a*k,p*k,c*k]},_.angle=function(h){return arguments.length?(f=h%360*X,x()):f*k},_.reflectX=function(h){return arguments.length?(s=h?-1:1,x()):s<0},_.reflectY=function(h){return arguments.length?(d=h?-1:1,x()):d<0},_.precision=function(h){return arguments.length?(R=ne(z,P=h*h),I()):sn(P)},_.fitExtent=function(h,$){return Re(_,h,$)},_.fitSize=function(h,$){return _i(_,h,$)},_.fitWidth=function(h,$){return Si(_,h,$)},_.fitHeight=function(h,$){return yi(_,h,$)};function x(){var h=te(e,0,0,s,d,f).apply(null,t(l,o)),$=te(e,i-h[0],r-h[1],s,d,f);return u=ae(a,p,c),z=ht(t,$),L=ht(u,z),R=ne(z,P),I()}function I(){return A=m=null,_}return function(){return t=n.apply(this,arguments),_.invert=t.invert&&T,x()}}function Tt(n,t){return[n,We(ke((Z+t)/2))]}Tt.invert=function(n,t){return[n,2*ce(Ge(t))-Z]};function Li(){return Ai(Tt).scale(961/J)}function Ai(n){var t=$i(n),e=t.center,i=t.scale,r=t.translate,l=t.clipExtent,o=null,a,p,c;t.scale=function(f){return arguments.length?(i(f),u()):i()},t.translate=function(f){return arguments.length?(r(f),u()):r()},t.center=function(f){return arguments.length?(e(f),u()):e()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=p=c=null:(o=+f[0][0],a=+f[0][1],p=+f[1][0],c=+f[1][1]),u()):o==null?null:[[o,a],[p,c]]};function u(){var f=N*i(),s=t(Ke(t.rotate()).invert([0,0]));return l(o==null?[[s[0]-f,s[1]-f],[s[0]+f,s[1]+f]]:n===Tt?[[Math.max(s[0]-f,o),a],[Math.min(s[0]+f,p),c]]:[[o,Math.max(s[1]-f,a)],[p,Math.min(s[1]+f,c)]])}return u()}function Ii(n){let t,e,i,r,l,o,a,p,c,u;return{c(){t=G("div"),e=G("canvas"),i=fn(),r=G("canvas"),l=fn(),o=G("canvas"),a=fn(),p=G("canvas"),F(e,"id","land"),F(e,"class","canvas svelte-1t2jxat"),F(e,"width",un),F(e,"height",ln),F(r,"id","user-drawing"),F(r,"class","canvas svelte-1t2jxat"),F(r,"width",un),F(r,"height",ln),F(o,"id","water"),F(o,"class","canvas svelte-1t2jxat"),F(o,"width",un),F(o,"height",ln),F(p,"id","mouse-capture"),F(p,"class","canvas svelte-1t2jxat"),F(p,"width",un),F(p,"height",ln),F(t,"class","background svelte-1t2jxat")},m(f,s){Rt(f,t,s),D(t,e),n[9](e),D(t,i),D(t,r),n[10](r),D(t,l),D(t,o),n[11](o),D(t,a),D(t,p),c||(u=[$n(p,"mousemove",n[4]),$n(t,"mousedown",n[12]),$n(t,"mouseup",n[13])],c=!0)},p:Q,i:Q,o:Q,d(f){f&&Un(t),n[9](null),n[10](null),n[11](null),c=!1,yn(u)}}}const un=700,ln=700,ee="#4288c4",zi="#6d9dc7",ie=10,tn=5;function Ti(n,t,e){let i,r,l,o,a,p,c,u;dn(n,ct,m=>e(16,a=m)),dn(n,ft,m=>e(17,p=m)),dn(n,qe,m=>e(7,c=m)),dn(n,Fe,m=>e(8,u=m));const f=Li().scale(8e3).translate([un/2,ln/2]).center([5.3,52.12]),s=Math.ceil(ln/tn),d=Math.ceil(un/tn);let g,E,v,w=!1;function S(m,_,T,x){const I=vi(f,_);_.clearRect(0,0,un,ln),_.beginPath(),I(m),T&&(_.fillStyle=T,_.fill()),x&&(_.strokeStyle=x,_.stroke())}function M(m){if(w){const _=m.clientX-o.left,T=m.clientY-o.top;l.fillStyle=zi,l.globalCompositeOperation=p?"destination-out":"source-over",a?y(Math.floor(_/tn),Math.floor(T/tn),Math.round(ie/tn)):(l.beginPath(),l.arc(_,T,ie,0,2*Math.PI),l.fill())}}function y(m,_,T){const x=Math.max(0,_-T),I=Math.min(s,_+T),h=Math.max(0,m-T),$=Math.min(d,m+T);for(let q=x;q<=I;q++)for(let Y=h;Y<=$;Y++){const W=Math.abs(q-_),en=Math.abs(Y-m);Math.sqrt(W*W+en*en)<=T&&l.fillRect(Y*tn,q*tn,tn,tn)}}function P(m){Ln[m?"unshift":"push"](()=>{g=m,e(0,g)})}function R(m){Ln[m?"unshift":"push"](()=>{v=m,e(2,v)})}function z(m){Ln[m?"unshift":"push"](()=>{E=m,e(1,E)})}const L=()=>e(3,w=!0),A=()=>e(3,w=!1);return n.$$.update=()=>{n.$$.dirty&1&&e(6,i=g?g.getContext("2d"):null),n.$$.dirty&2&&e(5,r=E?E.getContext("2d"):null),n.$$.dirty&4&&(l=v?v.getContext("2d"):null),n.$$.dirty&4&&(o=v?v.getBoundingClientRect():null),n.$$.dirty&320&&i&&S(u,i,"#eeeeee","#ffffff"),n.$$.dirty&160&&r&&S(c,r,ee,ee)},[g,E,v,w,M,r,i,c,u,P,R,z,L,A]}class xi extends Lt{constructor(t){super(),Nt(this,t,Ti,Ii,Qn,{})}}function Ci(n){let t,e,i,r,l,o,a,p;return r=new He({}),a=new xi({}),{c(){t=G("main"),e=G("div"),i=G("div"),qt(r.$$.fragment),l=fn(),o=G("div"),qt(a.$$.fragment),F(e,"id","main-container"),F(e,"class","svelte-lryfyn")},m(c,u){Rt(c,t,u),D(t,e),D(e,i),ut(r,i,null),D(e,l),D(e,o),ut(a,o,null),p=!0},p:Q,i(c){p||(ot(r.$$.fragment,c),ot(a.$$.fragment,c),p=!0)},o(c){Dt(r.$$.fragment,c),Dt(a.$$.fragment,c),p=!1},d(c){c&&Un(t),lt(r),lt(a)}}}class Di extends Lt{constructor(t){super(),Nt(this,t,null,Ci,Qn,{})}}new Di({target:document.getElementById("app")});
